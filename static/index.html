<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <title>OpenIS</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
    <script src="scripts/wellknown.js" type="text/javascript"></script> 
    <script type="text/javascript" src='scripts/easy-button.js'></script>
    <script type="text/stylesheet" src="css/easy-button.css"></script>

    <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src="scripts/sparql.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:fixed; top:0%; bottom:0; width:100%;}

  </style>
</head>
<body>
    <div id='map'></div>

    <script type="text/javascript">
        $("#caca").click(function() {
            alert( "Handler for .click() called." );
        });
// Replace 'mapbox.streets' with your map id.
        var mapboxTiles = L.tileLayer('https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw' , {
            attribution: '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        });

        var map = L.map('map')
                   .addLayer(mapboxTiles)
                   .setView([50.83906, 4.35308], 13);
        tracks = new L.FeatureGroup();
        map.addLayer(tracks);

        function showTracks(data){
            var res = data.results.bindings
            tracks = new L.FeatureGroup();
            map.addLayer(tracks);
            for (var i=0; i<res.length; i++){
                var col = '#' + (function co(lor){   return (lor +=
                  [0,1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f'][Math.floor(Math.random()*16)])
                  && (lor.length == 6) ?  lor : co(lor); })(''); 
                var track = L.geoJson(parse(res[i].geom.value),{color: col});
                track.bindPopup("<pre>" + res[i].track.value + "</pre>");
                track.addTo(tracks);
            }
        }

        function deleteTracks(){

        }

        L.easyButton({states:[
            {
                stateName: 'addTracks',
                icon: '<span class="star">&starf;</span>',
                onClick: function(control){
                    SPARQL.allTracks().done(showTracks); 
                    control.state('removeTracks');
                },
                title: 'Display all tracks'
            },
            {
                stateName: 'removeTracks',
                icon: '<span class="cross">&cross;</span>',
                onClick: function(control){
                    deleteTracks();
                    map.removeLayer(tracks);
                    control.state('addTracks');
                },
                title: 'Hide all tracks'
            }
        ]}).addTo(map);

        
              
    </script>
</body>
</html>